<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶œì„ì²´í¬</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, sans-serif; background: #f9fafb; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .card { background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); padding: 24px; margin-bottom: 24px; }
        h1 { font-size: 24px; font-weight: bold; margin-bottom: 16px; }
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
        .btn { padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; }
        .btn-sec { background: #e5e7eb; color: #374151; }
        .btn-sec:hover { background: #d1d5db; }
        .btn-sec.active { background: #2563eb; color: white; }
        .btn-primary { background: #2563eb; color: white; }
        .btn-success { background: #16a34a; color: white; }
        .btn-danger { background: #dc2626; color: white; }
        .input-section { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; text-align: center; color: white; border-radius: 12px; }
        .input-section h2 { font-size: 24px; margin-bottom: 20px; }
        .input-section input { font-size: 32px; padding: 16px; border: none; border-radius: 8px; width: 100%; max-width: 400px; text-align: center; }
        #msg { margin-top: 16px; padding: 12px; border-radius: 8px; font-size: 16px; font-weight: bold; display: none; }
        #msg.success { background: #10b981; }
        #msg.error { background: #ef4444; }
        #msg.warning { background: #f59e0b; }
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
        .stat { background: #f9fafb; border: 2px solid #e5e7eb; padding: 20px; text-align: center; border-radius: 8px; }
        .stat-num { font-size: 36px; font-weight: bold; }
        .stat.total .stat-num { color: #2563eb; }
        .stat.present .stat-num { color: #16a34a; }
        .stat.late .stat-num { color: #f97316; }
        .stat.absent .stat-num { color: #dc2626; }
        table { width: 100%; border-collapse: collapse; }
        th { background: #f3f4f6; padding: 12px; text-align: left; border-bottom: 2px solid #d1d5db; font-weight: 600; }
        td { padding: 12px; border-bottom: 1px solid #e5e7eb; }
        tr:hover { background: #f9fafb; }
        .badge { padding: 6px 16px; border-radius: 20px; font-weight: 600; font-size: 13px; }
        .badge.present { background: #dcfce7; color: #166534; }
        .badge.late { background: #fed7aa; color: #9a3412; }
        .badge.absent { background: #fee2e2; color: #991b1b; }
        .badge.excused { background: #f3f4f6; color: #374151; }
        .badge.none { background: #f9fafb; color: #9ca3af; }
        .teacher-btn { position: fixed; bottom: 24px; right: 24px; width: 60px; height: 60px; border-radius: 50%; background: #2563eb; color: white; border: none; font-size: 24px; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
        .modal.show { display: flex; align-items: center; justify-content: center; }
        .modal-content { background: white; padding: 32px; border-radius: 12px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                <h1>ê²¨ìš¸ë°©í•™ ììœ¨í•™ìŠµ</h1>
                <button class="btn btn-success" onclick="download()">ğŸ“¥ ë‹¤ìš´ë¡œë“œ</button>
            </div>
            
            <div class="controls">
                <div>
                    <div style="margin-bottom: 8px; font-weight: 500;">í•™ë…„</div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-sec active" onclick="setGrade('all')">ì „ì²´</button>
                        <button class="btn btn-sec" onclick="setGrade('1')">1í•™ë…„</button>
                        <button class="btn btn-sec" onclick="setGrade('2')">2í•™ë…„</button>
                    </div>
                </div>
                <div>
                    <div style="margin-bottom: 8px; font-weight: 500;">ì‹œê°„</div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-sec active" onclick="setTime('ì˜¤ì „')">ì˜¤ì „</button>
                        <button class="btn btn-sec" onclick="setTime('ì˜¤í›„')">ì˜¤í›„</button>
                    </div>
                </div>
            </div>
            
            <div style="background: #dbeafe; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                <input type="date" id="date" onchange="update()" style="padding: 8px; border: 1px solid #93c5fd; border-radius: 6px; margin-bottom: 8px;">
                <div id="dateDisplay" style="font-size: 18px; font-weight: bold; color: #1e40af;"></div>
                <div id="timeDisplay" style="font-size: 14px; color: #374151;"></div>
            </div>
        </div>
        
        <div class="card input-section">
            <h2>í•™ë²ˆì„ ì…ë ¥í•˜ì„¸ìš”</h2>
            <input type="text" id="input" placeholder="ì˜ˆ: 10102" maxlength="5" autofocus>
            <div id="msg"></div>
        </div>
        
        <div class="stats">
            <div class="stat total"><div class="stat-num" id="total">0</div><div>ì „ì²´</div></div>
            <div class="stat present"><div class="stat-num" id="present">0</div><div>ì¶œì„</div></div>
            <div class="stat late"><div class="stat-num" id="late">0</div><div>ì§€ê°</div></div>
            <div class="stat absent"><div class="stat-num" id="absent">0</div><div>ê²°ì„</div></div>
        </div>
        
        <div class="card">
            <h1>ì¶œì„ í˜„í™©</h1>
            <table>
                <thead><tr><th>í•™ë²ˆ</th><th>ì´ë¦„</th><th style="text-align:center;">ìƒíƒœ</th><th style="text-align:center;">ë¶ˆì°¸</th></tr></thead>
                <tbody id="table"></tbody>
            </table>
        </div>
    </div>
    
    <button class="teacher-btn" onclick="openModal()">âš™ï¸</button>
    
    <div id="modal" class="modal">
        <div class="modal-content">
            <h1 style="margin-bottom: 20px;">êµì‚¬ ì˜µì…˜</h1>
            <div class="form-group">
                <label>ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="pass">
                <button class="btn btn-primary" style="width: 100%; margin-top: 8px;" onclick="verify()">í™•ì¸</button>
            </div>
            <div id="options" style="display: none;">
                <hr style="margin: 20px 0; border: 0; border-top: 1px solid #e5e7eb;">
                <h3 style="margin-bottom: 12px;">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h3>
                <div class="form-group"><label>ìƒˆ ë¹„ë°€ë²ˆí˜¸</label><input type="password" id="newPass"></div>
                <div class="form-group"><label>í™•ì¸</label><input type="password" id="confPass"></div>
                <button class="btn btn-primary" style="width: 100%; margin-bottom: 20px;" onclick="changePass()">ë³€ê²½</button>
                <hr style="margin: 20px 0; border: 0; border-top: 1px solid #e5e7eb;">
                <h3 style="margin-bottom: 12px;">ìˆ˜ë™ ë³€ê²½</h3>
                <div class="form-group"><label>í•™ë²ˆ</label><input type="text" id="manId"></div>
                <div class="form-group">
                    <label>ìƒíƒœ</label>
                    <select id="manStatus">
                        <option value="present">ì¶œì„</option>
                        <option value="late">ì§€ê°</option>
                        <option value="absent">ê²°ì„</option>
                        <option value="excused">ë¶ˆì°¸</option>
                        <option value="none">ë¯¸ì²´í¬</option>
                    </select>
                </div>
                <button class="btn btn-primary" style="width: 100%; margin-bottom: 20px;" onclick="manualChange()">ë³€ê²½</button>
                <hr style="margin: 20px 0; border: 0; border-top: 1px solid #e5e7eb;">
                <button class="btn btn-danger" style="width: 100%;" onclick="reset()">ì „ì²´ ì´ˆê¸°í™”</button>
                <button class="btn btn-sec" style="width: 100%; margin-top: 12px;" onclick="closeModal()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        const g1 = [
            { í•™ë²ˆ: '10102', ì´ë¦„: 'ê¹€ë„ìœ¤', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10103', ì´ë¦„: 'ê¹€ë„í›ˆ', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10106', ì´ë¦„: 'ê¹€ì¬í˜„', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10115', ì´ë¦„: 'ì´ê±´ìƒ', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10116', ì´ë¦„: 'ì´ê¸°í˜', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10117', ì´ë¦„: 'ì´ì„œì¤€', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10119', ì´ë¦„: 'ì´ìœ¤ì°¬', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10123', ì´ë¦„: 'ê¹€ë³´ì„±', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10223', ì´ë¦„: 'ì´ì„œì¤€', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10306', ì´ë¦„: 'ì´ìŠ¹ì¤€', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10320', ì´ë¦„: 'ì¡°í˜„ì„', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10505', ì´ë¦„: 'ê¶Œê°€ì—°', ë¶ˆì°¸: 'ìˆ˜ ì˜¤ì „/ì˜¤í›„' },
            { í•™ë²ˆ: '10508', ì´ë¦„: 'ê¹€ìœ¤ì±„', ë¶ˆì°¸: 'ê¸ˆ ì˜¤ì „' },
            { í•™ë²ˆ: '10513', ì´ë¦„: 'ë°•ì§€í›„', ë¶ˆì°¸: 'ê¸ˆ ì˜¤í›„' },
            { í•™ë²ˆ: '10516', ì´ë¦„: 'ì´ì§€ìš°', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10601', ì´ë¦„: 'ê¹€ì„¸ì—°', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10608', ì´ë¦„: 'ìœ ì§€ì›', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10609', ì´ë¦„: 'ì´ë‚˜ìš´', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10611', ì´ë¦„: 'ì´ë£¨ë¦¬', ë¶ˆì°¸: 'ëª© ì˜¤í›„' },
            { í•™ë²ˆ: '10612', ì´ë¦„: 'ì´ì†Œìœ¤', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10613', ì´ë¦„: 'ì´ì˜ì¸', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10618', ì´ë¦„: 'ì •í¬ë€', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10619', ì´ë¦„: 'ìµœì§„ê²½', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10805', ì´ë¦„: 'ê¹€ë³´ë¯¸', ë¶ˆì°¸: 'í™” ì˜¤í›„' },
            { í•™ë²ˆ: '10815', ì´ë¦„: 'ìœ ì œë‹ˆ', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10901', ì´ë¦„: 'ê¹€ë¯¼ì„œ', ë¶ˆì°¸: 'ê¸ˆ ì˜¤ì „' },
            { í•™ë²ˆ: '10903', ì´ë¦„: 'ê¹€ì‹œí˜„', ë¶ˆì°¸: 'ê¸ˆ ì˜¤ì „/ì˜¤í›„' },
            { í•™ë²ˆ: '10904', ì´ë¦„: 'ê¹€í•˜ëŒ', ë¶ˆì°¸: 'ê¸ˆ ì˜¤ì „' },
            { í•™ë²ˆ: '10905', ì´ë¦„: 'ì„œí•˜ì€', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '10907', ì´ë¦„: 'ìœ ë¯¼ì •', ë¶ˆì°¸: 'ê¸ˆ ì˜¤ì „' },
            { í•™ë²ˆ: '10910', ì´ë¦„: 'ì´ë‚˜ìœ¤', ë¶ˆì°¸: 'ê¸ˆ ì˜¤ì „' }
        ];
        const g2 = [
            { í•™ë²ˆ: '20101', ì´ë¦„: 'ê¹€ë™í•˜', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20113', ì´ë¦„: 'ì´ì¬ê²½', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20215', ì´ë¦„: 'ì •ë¯¼ê·œ', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20301', ì´ë¦„: 'ê¹€ì„ ìš°', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20307', ì´ë¦„: 'ë°•ì´ì—˜', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20313', ì´ë¦„: 'ìœ¤ì—¬ëª…', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20418', ì´ë¦„: 'ìœ¤ì£¼ì„±', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20714', ì´ë¦„: 'ì´ìœ ì˜¨', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20801', ì´ë¦„: 'ê°•ë‹¤ì—°', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20802', ì´ë¦„: 'ê°•ì„œìœ ', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20807', ì´ë¦„: 'ê¹€ë¯¼ì„œ', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20810', ì´ë¦„: 'ì„œì¤€ì˜', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20811', ì´ë¦„: 'ì„œì§€ë¯¼', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '20815', ì´ë¦„: 'ì´ì„œìœ¤', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '21005', ì´ë¦„: 'ê¹€ì±„ì˜', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '21010', ì´ë¦„: 'ë°±ì†Œì€', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '21020', ì´ë¦„: 'ì´ì˜ˆë‹´', ë¶ˆì°¸: '-' },
            { í•™ë²ˆ: '21022', ì´ë¦„: 'ì •ì±„ë¦°', ë¶ˆì°¸: '-' }
        ];

        let s = {
            grade: 'all',
            time: 'ì˜¤ì „',
            date: new Date().toISOString().split('T')[0],
            att: {},
            pw: localStorage.getItem('pw') || '1234'
        };

        function init() {
            document.getElementById('date').value = s.date;
            update();
            setInterval(() => {
                document.getElementById('timeDisplay').textContent = 'í˜„ì¬: ' + new Date().toLocaleTimeString('ko-KR', {hour12: false});
            }, 1000);
            setInterval(autoAbs, 1000);
            document.getElementById('input').addEventListener('keypress', e => {
                if (e.key === 'Enter') process();
            });
        }

        function setGrade(g) {
            s.grade = g;
            document.querySelectorAll('.controls > div:first-child .btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            render();
        }

        function setTime(t) {
            s.time = t;
            document.querySelectorAll('.controls > div:last-child .btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            update();
        }

        function update() {
            s.date = document.getElementById('date').value;
            const days = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            const d = new Date(s.date);
            document.getElementById('dateDisplay').textContent = `${s.date} (${days[d.getDay()]}ìš”ì¼) - ${s.time}`;
            render();
        }

        function getData() {
            if (s.grade === '1') return g1;
            if (s.grade === '2') return g2;
            return [...g1, ...g2].sort((a, b) => a.í•™ë²ˆ.localeCompare(b.í•™ë²ˆ));
        }

        function getDay(ds) {
            const days = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            return days[new Date(ds).getDay()];
        }

        function isExc(st) {
            if (st.ë¶ˆì°¸ === '-') return false;
            const day = getDay(s.date);
            return st.ë¶ˆì°¸.includes(day) && st.ë¶ˆì°¸.includes(s.time === 'ì˜¤ì „' ? 'ì˜¤ì „' : 'ì˜¤í›„');
        }

        function isLate() {
            const m = new Date().getHours() * 60 + new Date().getMinutes();
            return s.time === 'ì˜¤ì „' ? m > 510 : m > 780;
        }

        function isAbs() {
            const m = new Date().getHours() * 60 + new Date().getMinutes();
            return s.time === 'ì˜¤ì „' ? m > 525 : m > 795;
        }

        function isOver() {
            const m = new Date().getHours() * 60 + new Date().getMinutes();
            return s.time === 'ì˜¤ì „' ? m > 710 : m > 960;
        }

        function autoAbs() {
            if (isOver()) {
                let ch = false;
                getData().forEach(st => {
                    const k = `${s.date}-${s.time}-${st.í•™ë²ˆ}`;
                    if (s.att[k]) { delete s.att[k]; ch = true; }
                });
                if (ch) render();
                return;
            }
            if (!isAbs()) return;
            let ch = false;
            getData().forEach(st => {
                const k = `${s.date}-${s.time}-${st.í•™ë²ˆ}`;
                if (!s.att[k] && !isExc(st)) { s.att[k] = 'absent'; ch = true; }
            });
            if (ch) render();
        }

        function process() {
            const inp = document.getElementById('input');
            const id = inp.value.trim();
            if (!id) return;
            
            const st = [...g1, ...g2].find(x => x.í•™ë²ˆ === id);
            if (!st) {
                msg('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í•™ë²ˆ', 'error');
                inp.value = '';
                return;
            }
            
            const k = `${s.date}-${s.time}-${id}`;
            
            if (isExc(st)) {
                msg(`${st.ì´ë¦„} - ë¶ˆì°¸ ì˜ˆì •`, 'warning');
                inp.value = '';
                return;
            }
            
            if (isAbs()) {
                if (s.att[k] === 'absent') {
                    s.att[k] = 'late';
                    msg(`${st.ì´ë¦„} - ì§€ê° ì²˜ë¦¬`, 'warning');
                } else {
                    msg(`${st.ì´ë¦„} - ì´ë¯¸ ì²˜ë¦¬ë¨`, 'warning');
                }
            } else if (isLate()) {
                s.att[k] = 'late';
                msg(`${st.ì´ë¦„} - ì§€ê°`, 'warning');
            } else {
                s.att[k] = 'present';
                msg(`${st.ì´ë¦„} - ì¶œì„`, 'success');
            }
            
            inp.value = '';
            render();
        }

        function msg(txt, type) {
            const m = document.getElementById('msg');
            m.textContent = txt;
            m.className = type;
            m.style.display = 'block';
            setTimeout(() => m.style.display = 'none', 2000);
        }

        function getSt(id, st) {
            const k = `${s.date}-${s.time}-${id}`;
            let status = s.att[k];
            if (!status && isExc(st)) status = 'excused';
            return status || 'none';
        }

        function render() {
            const data = getData();
            const tb = document.getElementById('table');
            tb.innerHTML = '';
            
            let p = 0, l = 0, a = 0;
            
            data.forEach(st => {
                const status = getSt(st.í•™ë²ˆ, st);
                if (status === 'present') p++;
                if (status === 'late') l++;
                if (status === 'absent') a++;
                
                const sm = {
                    'present': { t: 'ì¶œì„', c: 'present' },
                    'late': { t: 'ì§€ê°', c: 'late' },
                    'absent': { t: 'ê²°ì„', c: 'absent' },
                    'excused': { t: 'ë¶ˆì°¸', c: 'excused' },
                    'none': { t: '-', c: 'none' }
                };
                
                const x = sm[status];
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${st.í•™ë²ˆ}</td>
                    <td style="font-weight:600;">${st.ì´ë¦„}</td>
                    <td style="text-align:center;"><span class="badge ${x.c}">${x.t}</span></td>
                    <td style="text-align:center; color:${st.ë¶ˆì°¸!=='-'?'#dc2626':'#9ca3af'};">${st.ë¶ˆì°¸}</td>
                `;
                tb.appendChild(tr);
            });
            
            document.getElementById('total').textContent = data.length;
            document.getElementById('present').textContent = p;
            document.getElementById('late').textContent = l;
            document.getElementById('absent').textContent = a;
        }

        function download() {
            const data = getData();
            const day = getDay(s.date);
            const rows = [['ë‚ ì§œ','ìš”ì¼','ì‹œê°„','í•™ë²ˆ','ì´ë¦„','ìƒíƒœ']];
            data.forEach(st => {
                const status = getSt(st.í•™ë²ˆ, st);
                const t = {present:'ì¶œì„',late:'ì§€ê°',absent:'ê²°ì„',excused:'ë¶ˆì°¸',none:'ë¯¸ì²´í¬'}[status];
                rows.push([s.date, day, s.time, st.í•™ë²ˆ, st.ì´ë¦„, t]);
            });
            const csv = rows.map(r => r.join(',')).join('\n');
            const blob = new Blob(['\uFEFF' + csv], {type: 'text/csv;charset=utf-8;'});
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `ì¶œì„_${s.date}_${s.time}.csv`;
            link.click();
        }

        function openModal() {
            document.getElementById('modal').classList.add('show');
            document.getElementById('options').style.display = 'none';
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('show');
            document.getElementById('pass').value = '';
        }

        function verify() {
            if (document.getElementById('pass').value === s.pw) {
                document.getElementById('options').style.display = 'block';
            } else {
                alert('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤');
            }
        }

        function changePass() {
            const n = document.getElementById('newPass').value;
            const c = document.getElementById('confPass').value;
            if (n !== c) { alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤'); return; }
            if (!n) { alert('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”'); return; }
            s.pw = n;
            localStorage.setItem('pw', n);
            alert('ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤');
            document.getElementById('newPass').value = '';
            document.getElementById('confPass').value = '';
        }

        function manualChange() {
            const id = document.getElementById('manId').value;
            const status = document.getElementById('manStatus').value;
            const st = [...g1, ...g2].find(x => x.í•™ë²ˆ === id);
            if (!st) { alert('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í•™ë²ˆ'); return; }
            const k = `${s.date}-${s.time}-${id}`;
            if (status === 'none') delete s.att[k];
            else s.att[k] = status;
            render();
            alert('ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤');
        }

        function reset() {
            if (!confirm('ì „ì²´ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            s.att = {};
            render();
            alert('ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤');
        }

        init();
    </script>
</body>
</html>
